package com.tmz.ian.activity;import android.content.Intent;import android.os.Bundle;import android.support.v4.app.Fragment;import android.support.v4.app.FragmentManager;import android.support.v4.app.FragmentPagerAdapter;import android.support.v4.view.ViewPager;import android.support.v7.widget.Toolbar;import android.view.MenuItem;import com.android.volley.VolleyError;import com.tmz.ian.R;import com.tmz.ian.fragment.DealDetailsFragment;import com.tmz.ian.view.SlidingTabLayout;import org.json.JSONObject;/** * Created by Ratan on 7/27/2015. */public class DealDetailTab extends BaseActivity {    public static SlidingTabLayout tabLayout;    public static ViewPager viewPager;    public static int int_items = 3 ;    private String dealId ;    private int pageId ;    @Override    public void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.tab_layout);        tabLayout = (SlidingTabLayout) findViewById(R.id.tabs);        viewPager = (ViewPager)findViewById(R.id.viewpager);        Intent budleIntent = getIntent();        Bundle args =   budleIntent.getExtras();        if(args != null)        {            dealId = args.getString("dealId");            pageId = args.getInt("tabId");        }        //  tabLayout.setCustomTabView(R.layout.tabtext_layout,R.id.tabTextView);      /*  for (int i = 0; i < tabLayout.get; i++) {            TabLayout.Tab tab = tabLayout.getTabAt(i);            tab.setCustomView(pagerAdapter.getTabView(i));        }*/       /* BadgeView badge = new BadgeView(getActivity(), ((ViewGroup) tabLayout.getChildAt(0)).getChildAt(2));        badge.setText("5");        badge.setTextColor(Color.parseColor("#000000"));        badge.setBadgeBackgroundColor(Color.parseColor("#FFFFFF"));        badge.show();*/        /**         *Set an Apater for the View Pager         */        viewPager.setAdapter(new DealTabAdapter(getSupportFragmentManager()));        /**         * Now , this is a workaround ,         * The setupWithViewPager dose't works without the runnable .         * Maybe a Support Library Bug .         */        tabLayout.post(new Runnable() {            @Override            public void run() {                viewPager.setCurrentItem(pageId);                viewPager.setSelected(true);                tabLayout.setViewPager(viewPager);            }        });        Toolbar toolbar = (android.support.v7.widget.Toolbar) findViewById(R.id.my_toolbar);        setSupportActionBar(toolbar);        getSupportActionBar().setHomeButtonEnabled(true);        getSupportActionBar().setDisplayHomeAsUpEnabled(true);    }    @Override    protected String getTagName() {        return null;    }    @Override    public void showProgress(boolean show, String tag) {    }    @Override    public void onSuccess(JSONObject response, String tag) {    }    @Override    public void onError(VolleyError error, String message, String tag) {    }    class DealTabAdapter extends FragmentPagerAdapter {        public DealTabAdapter(FragmentManager fm) {            super(fm);        }        /**         * Return fragment with respect to Position .         */        @Override        public Fragment getItem(int position)        {            switch (position){                case 0 :                    Bundle args = new Bundle();                    args.putString("dealId",dealId);                    Fragment dealDetailsFragment = new DealDetailsFragment();                    dealDetailsFragment.setArguments(args);                    return dealDetailsFragment;//                case 1 ://                    Bundle dealSubscriptionargs = new Bundle();//                    dealSubscriptionargs.putString("dealId",dealId);//                    Fragment dealSubscriptionFragment = new DealSubscriptionFragment();//                    dealSubscriptionFragment.setArguments(dealSubscriptionargs);//                    return dealSubscriptionFragment;//                case 2 ://                    Bundle dealMeetingsargs = new Bundle();//                    dealMeetingsargs.putString("dealId",dealId);//                    Fragment dealMeetingsFragment = new DealMeetingsFragment();//                    dealMeetingsFragment.setArguments(dealMeetingsargs);//                    return dealMeetingsFragment;            }            return null;        }        @Override        public int getCount() {            return int_items;        }        /**         * This method returns the title of the tab according to the position.         */        @Override        public CharSequence getPageTitle(int position) {            switch (position){                case 0 :                    return "Deal";                case 1 :                    return "Subscription";                case 2 :                    return "Meetings ";            }            return null;        }    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        super.onBackPressed();        return true;    }}